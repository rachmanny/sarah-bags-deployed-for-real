import{a as R,b as Q}from"./chunk-JIOBPSDR.js";import{a as $,b as Y,c as L,g as N,i as j,j as A,n as G}from"./chunk-ZB3LVBHJ.js";import{Aa as E,Da as b,G as I,Ia as D,Ja as h,Ka as F,La as v,Na as _,Oa as V,P as x,Pa as y,Qa as M,Ra as r,Sa as o,Ta as z,Ua as P,W as p,X as u,Xa as m,Ya as s,cb as q,db as c,eb as d,fb as O,ga as C,ib as w,jb as k,oa as S,p as T,qa as l,rb as f,sb as B}from"./chunk-QGD7UGTR.js";var H=(n,e)=>e.label,Z=(n,e)=>e.hex;function J(n,e){if(n&1&&(r(0,"span",8),c(1),o()),n&2){let t=s();h("ngClass",t.badge),l(),d(t.badge)}}function K(n,e){if(n&1){let t=P();r(0,"button",19),m("click",function(){let a=p(t).$implicit,g=s(2);return u(g.selectImage(a))}),z(1,"img",7),o()}if(n&2){let t=e.$implicit,i=s(),a=s();v("active",a.selectedImage()===t),l(),h("src",t,S)("alt",i.name+" view")}}function W(n,e){if(n&1&&(r(0,"small"),c(1),w(2,"currency"),o()),n&2){let t=s();l(),d(k(2,1,t.originalPrice))}}function X(n,e){if(n&1){let t=P();r(0,"div",16)(1,"div",22)(2,"label",23),c(3,"Personalize with initials"),o(),r(4,"small"),c(5),o()(),r(6,"input",24,0),m("input",function(){p(t);let a=q(7),g=s(2);return u(g.updateInitials(a.value))}),o()()}if(n&2){let t,i=s(),a=s();l(5),O("Max ",(t=i.maxInitials)!==null&&t!==void 0?t:3," chars"),l(),h("value",a.selectedInitials())}}function ee(n,e){if(n&1&&(r(0,"small"),c(1),o()),n&2){let t=s().$implicit;l(),d(t.subtitle)}}function te(n,e){if(n&1){let t=P();r(0,"button",19),m("click",function(){let a=p(t).$implicit,g=s(3);return u(g.setSize(a))}),r(1,"span"),c(2),o(),b(3,ee,2,1,"small"),o()}if(n&2){let t=e.$implicit,i=s(3);v("active",i.selectedSize()===t.label),l(2),d(t.label),l(),_(t.subtitle?3:-1)}}function ne(n,e){if(n&1&&(r(0,"div",16)(1,"p",25),c(2,"Select size"),o(),r(3,"div",26),y(4,te,4,4,"button",10,H),o()()),n&2){let t=s();l(4),M(t.sizes)}}function ie(n,e){if(n&1){let t=P();r(0,"button",19),m("click",function(){let a=p(t).$implicit,g=s(3);return u(g.setColor(a))}),o()}if(n&2){let t=e.$implicit,i=s(3);F("background",t.hex),v("active",i.selectedColor()===t.hex),D("aria-label",t.name)}}function oe(n,e){if(n&1&&(r(0,"div",16)(1,"p",25),c(2,"Choose color"),o(),r(3,"div",27),y(4,ie,1,5,"button",28,Z),o()()),n&2){let t=s();l(4),M(t.strapColors)}}function re(n,e){if(n&1){let t=P();r(0,"div",3)(1,"section",5)(2,"div",6),z(3,"img",7),b(4,J,2,2,"span",8),o(),r(5,"div",9),y(6,K,2,4,"button",10,V),o()(),r(8,"section",11)(9,"nav",12)(10,"a",13),c(11,"Shop"),o(),r(12,"span"),c(13,"/"),o(),r(14,"span"),c(15),o()(),r(16,"h1"),c(17),o(),r(18,"p",14)(19,"strong"),c(20),w(21,"currency"),o(),b(22,W,3,3,"small"),o(),r(23,"p",15),c(24),o(),b(25,X,8,2,"div",16)(26,ne,6,0,"div",16)(27,oe,6,0,"div",16),r(28,"div",17)(29,"div",18)(30,"button",19),m("click",function(){p(t);let a=s();return u(a.decreaseQuantity())}),c(31,"-"),o(),r(32,"span"),c(33),o(),r(34,"button",19),m("click",function(){p(t);let a=s();return u(a.increaseQuantity())}),c(35,"+"),o()(),r(36,"button",20),m("click",function(){p(t);let a=s();return u(a.addToCart())}),c(37),o()(),r(38,"p",21),c(39,"Total: "),r(40,"strong"),c(41),w(42,"currency"),o()()()()}if(n&2){let t,i=e,a=s();l(3),h("src",a.selectedImage(),S)("alt",i.name),l(),_(i.badge?4:-1),l(2),M(a.gallery()),l(9),d(i.category),l(2),d(i.name),l(3),d(k(21,16,a.displayPrice())),l(2),_(i.originalPrice?22:-1),l(2),O(" ",(t=i.description)!==null&&t!==void 0?t:"Thoughtfully crafted for stylish everyday parent life and gifting."," "),l(),_(i.cta==="customize"?25:-1),l(),_(i.sizes!=null&&i.sizes.length?26:-1),l(),_(i.strapColors!=null&&i.strapColors.length?27:-1),l(6),d(a.quantity()),l(3),v("added",a.addFeedback()),l(),O(" ",a.addFeedback()?"Added to cart":"Add to cart"," "),l(4),d(k(42,18,a.totalPrice()))}}function ae(n,e){n&1&&(r(0,"section",4)(1,"h1"),c(2,"Product not found"),o(),r(3,"p"),c(4,"That item could not be loaded. Return to the catalog to browse all products."),o(),r(5,"a",13),c(6,"Back to shop"),o()())}var U=class n{route=x(N);router=x(j);location=x($);catalog=x(Q);cart=x(G);addFeedbackTimer=null;product=R(this.route.paramMap.pipe(T(e=>e.get("id")??""),I(e=>this.catalog.getProductById(e))),{initialValue:null});selectedImage=C("");selectedInitials=C("");selectedSize=C(null);selectedColor=C(null);quantity=C(1);addFeedback=C(!1);selectedSizePriceDelta=f(()=>this.currentSize()?.priceDelta??0);displayPrice=f(()=>{let e=this.product();return e?e.price+this.selectedSizePriceDelta():0});totalPrice=f(()=>this.displayPrice()*this.quantity());gallery=f(()=>{let e=this.product();return e?e.gallery?.length?e.gallery:[e.image]:[]});currentSize=f(()=>{let e=this.product(),t=this.selectedSize();return!e?.sizes?.length||!t?null:e.sizes.find(i=>i.label===t)??null});selectedColorName=f(()=>{let e=this.product(),t=this.selectedColor();return!e?.strapColors?.length||!t?null:e.strapColors.find(i=>i.hex===t)?.name??null});constructor(){B(()=>{let e=this.product();e&&(this.selectedImage.set(this.gallery()[0]??e.image),this.selectedInitials.set(""),this.quantity.set(1),this.selectedSize.set(e.sizes?.[0]?.label??null),this.selectedColor.set(e.strapColors?.[0]?.hex??null),this.addFeedback.set(!1))})}selectImage(e){this.selectedImage.set(e)}updateInitials(e){let i=this.product()?.maxInitials??3,a=e.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,i);this.selectedInitials.set(a)}setSize(e){this.selectedSize.set(e.label)}setColor(e){this.selectedColor.set(e.hex)}decreaseQuantity(){this.quantity.update(e=>Math.max(1,e-1))}increaseQuantity(){this.quantity.update(e=>Math.min(99,e+1))}goBack(){if(window.history.length>1){this.location.back();return}this.router.navigate(["/"])}addToCart(){let e=this.product();if(!e)return;let t={initials:this.selectedInitials()||void 0,colorHex:this.selectedColor()??void 0,colorName:this.selectedColorName()??void 0,sizeLabel:this.selectedSize()??void 0};this.cart.add(e,{quantity:this.quantity(),unitPrice:this.displayPrice(),customization:t}),this.addFeedback.set(!0),this.addFeedbackTimer&&clearTimeout(this.addFeedbackTimer),this.addFeedbackTimer=setTimeout(()=>{this.addFeedback.set(!1),this.addFeedbackTimer=null},1200)}ngOnDestroy(){this.addFeedbackTimer&&clearTimeout(this.addFeedbackTimer)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=E({type:n,selectors:[["app-product-detail"]],decls:5,vars:1,consts:[["initialsInput",""],[1,"detail-wrap"],["type","button",1,"back-button",3,"click"],[1,"detail-grid"],[1,"not-found"],[1,"gallery"],[1,"main-image"],[3,"src","alt"],[1,"badge",3,"ngClass"],[1,"thumb-row"],["type","button",3,"active"],[1,"copy"],[1,"crumbs"],["routerLink","/"],[1,"price"],[1,"desc"],[1,"block"],[1,"actions"],[1,"qty"],["type","button",3,"click"],["type","button",1,"add",3,"click"],[1,"total"],[1,"label-row"],["for","initials"],["id","initials","type","text","placeholder","ABC",3,"input","value"],[1,"label"],[1,"size-row"],[1,"color-row"],["type","button",3,"active","background"]],template:function(t,i){if(t&1&&(r(0,"main",1)(1,"button",2),m("click",function(){return i.goBack()}),c(2," Back "),o(),b(3,re,43,20,"div",3)(4,ae,7,0,"section",4),o()),t&2){let a;l(3),_((a=i.product())?3:4,a)}},dependencies:[L,Y,A],styles:["[_nghost-%COMP%]{color:var(--ink);display:block}.detail-wrap[_ngcontent-%COMP%]{margin:0 auto;max-width:1200px;padding:1.8rem 1.25rem 2.4rem}.back-button[_ngcontent-%COMP%]{background:linear-gradient(180deg,#fff,#f9eef1);border:1px solid var(--line);border-radius:999px;color:var(--ink);cursor:pointer;font-size:.84rem;font-weight:700;margin-bottom:1rem;padding:.5rem .88rem;transition:border-color .2s ease,box-shadow .2s ease,transform .2s ease}.back-button[_ngcontent-%COMP%]:hover{border-color:#e2c4cb;box-shadow:0 8px 16px #2d14181f;transform:translateY(-1px)}.detail-grid[_ngcontent-%COMP%]{display:grid;gap:1.2rem;grid-template-columns:1fr}.gallery[_ngcontent-%COMP%]{display:grid;gap:.75rem}.main-image[_ngcontent-%COMP%]{aspect-ratio:1 / 1;border:1px solid var(--line);border-radius:1rem;overflow:hidden;position:relative}.main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;object-fit:cover;width:100%}.badge[_ngcontent-%COMP%]{border-radius:999px;color:#fff;font-size:.65rem;font-weight:700;left:.7rem;letter-spacing:.05em;padding:.3rem .5rem;position:absolute;text-transform:uppercase;top:.7rem}.badge.new[_ngcontent-%COMP%]{background:var(--rose)}.badge.sale[_ngcontent-%COMP%]{background:#f5a11e}.badge.personalized[_ngcontent-%COMP%]{background:#5b4f50}.thumb-row[_ngcontent-%COMP%]{display:grid;gap:.45rem;grid-template-columns:repeat(4,1fr)}.thumb-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#fff;border:2px solid transparent;border-radius:.6rem;cursor:pointer;overflow:hidden;padding:0;transition:transform .2s ease,border-color .2s ease}.thumb-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.thumb-row[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{border-color:var(--rose)}.thumb-row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{aspect-ratio:1 / 1;display:block;height:100%;object-fit:cover;width:100%}.copy[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_riseIn .36s ease;background:#fff;border:1px solid var(--line);border-radius:1rem;box-shadow:var(--shadow);padding:1rem}.crumbs[_ngcontent-%COMP%]{align-items:center;display:flex;gap:.4rem;margin-bottom:.5rem}.crumbs[_ngcontent-%COMP%], .crumbs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--muted);font-size:.8rem;text-decoration:none}.copy[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-size:clamp(1.4rem,2.8vw,2rem);margin:0}.price[_ngcontent-%COMP%]{align-items:baseline;display:flex;gap:.6rem;margin:.55rem 0 0}.price[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--rose);font-size:1.8rem}.price[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--muted);text-decoration:line-through}.desc[_ngcontent-%COMP%]{color:var(--muted);line-height:1.55}.block[_ngcontent-%COMP%]{margin-top:1rem}.label-row[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:space-between;margin-bottom:.45rem}.label-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .label[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-size:.82rem;font-weight:700;letter-spacing:.04em;margin:0;text-transform:uppercase}.label-row[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--muted);font-size:.72rem}input[_ngcontent-%COMP%]{border:1px solid var(--line);border-radius:999px;font-size:1.1rem;font-weight:700;letter-spacing:.2em;padding:.74rem 1rem;text-transform:uppercase;width:100%}.size-row[_ngcontent-%COMP%]{display:grid;gap:.5rem;grid-template-columns:repeat(2,minmax(0,1fr))}.size-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-items:flex-start;background:#fff;border:1px solid var(--line);border-radius:.8rem;cursor:pointer;display:flex;flex-direction:column;gap:.2rem;padding:.6rem;transition:border-color .2s ease,transform .2s ease}.size-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:#e5c8cf;transform:translateY(-1px)}.size-row[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fce9ed;border-color:var(--rose)}.size-row[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--muted);font-size:.74rem}.color-row[_ngcontent-%COMP%]{display:flex;gap:.5rem}.color-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid #d8c9ce;border-radius:999px;cursor:pointer;height:34px;transition:transform .2s ease,border-color .2s ease;width:34px}.color-row[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{border-color:var(--ink);box-shadow:0 0 0 2px #fff inset,0 0 0 1px var(--ink)}.color-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.actions[_ngcontent-%COMP%]{align-items:center;display:flex;gap:.6rem;margin-top:1.1rem}.qty[_ngcontent-%COMP%]{background:#f6f1f2;border-radius:999px;display:flex;gap:.35rem;padding:.2rem}.qty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--line);border-radius:999px;cursor:pointer;font-weight:700;height:34px;transition:border-color .2s ease,transform .2s ease;width:34px}.qty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:#e5c8cf;transform:translateY(-1px)}.qty[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{align-items:center;display:inline-flex;font-weight:700;justify-content:center;min-width:26px}.add[_ngcontent-%COMP%]{background:var(--rose);border:0;border-radius:999px;color:#fff;cursor:pointer;flex:1;font-size:.92rem;font-weight:700;padding:.74rem;transition:transform .2s ease,filter .2s ease,box-shadow .2s ease}.add[_ngcontent-%COMP%]:hover{box-shadow:0 12px 22px #38111833;filter:brightness(1.02);transform:translateY(-1px)}.add.added[_ngcontent-%COMP%]{background:#163b27}.total[_ngcontent-%COMP%]{color:var(--muted);margin:.9rem 0 0}.total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--ink)}.not-found[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--line);border-radius:1rem;padding:1.5rem}.not-found[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;margin:0 0 .5rem}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--muted)}.not-found[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--rose);font-weight:700;text-decoration:none}@media (min-width: 960px){.detail-grid[_ngcontent-%COMP%]{align-items:start;grid-template-columns:1.15fr 1fr}.gallery[_ngcontent-%COMP%]{position:sticky;top:88px}}@keyframes _ngcontent-%COMP%_riseIn{0%{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}"]})};export{U as ProductDetailComponent};
